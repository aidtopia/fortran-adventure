# An Adventure in Fortran

This project is a translator that rewrites code written in a subset of Fortran IV (from the DEC PDP-10 era) to C in order to recreate the authentic experience of [Adventure](https://en.wikipedia.org/wiki/Colossal_Cave_Adventure) as played in the late 1970s.

The goal was to implement just enough of Fortran IV (and the DEC PDP-10 runtime environment) to be able to translate Adventure into standard, portable C.  Simplifications in its model of Fortran were baked in, so it's _not_ a good basis for creating a more full-featured Fortran translator.  For example, all variables are assumed to be INTEGER (or interchangeable with INTEGER).  Adding support for REAL, COMPLEX, and CHARACTER types would require some fundamental changes to the approach.

## Status

The project is being moved from a private repository to this public one, so it's not yet a turnkey experience.

The translator builds with Visual Studio and runs on Microsoft Windows.  The code sticks closely to the C++ standards, albeit very recent standards.  It should build with clang or gcc without trouble.

The code generated by the translator is standard C11 and should compile with almost any toolchain.  I compile it with MSVC from the command line.

Using [The Adventure Family Tree][https://mipmip.org/advfamily/advfamily.html]'s nomenclature for identifying versions of Adventure ...

* [WOOD0350 Ver. 2](https://mipmip.org/advfamily/advfamily.html#WOOD0350) translates, compiles, and runs well.  This was probably the version I played as a kid, and it was the target version when I started writing the translator.

* [WOOD0350 Ver. 1](https://mipmip.org/advfamily/advfamily.html#WOOD0350) is not yet supported, because the translator doesn't yet handle building from multiple source files and because it doesn't yet provide an IFILE subroutine.

This repository does _not_ include the Adventure sources and data files.  Those are already widely available.  If you want to get your hands on the sources, I suggest starting with the aforementioned Adventure Family Tree and using the links to the [Interactive Fiction Database](https://ifdb.org/).

## Motivation

As far as I can tell, the version of Adventure I played in the late 1970s has never been ported to a modern system with 100% fidelity. (See Note 1.)

Many ports have been based on extended versions (more rooms, puzzles, and treasures).  Many have modernized aspects of the experience, like replacing the ALL CAPS text with mixed case, adding a status bar, etc.  Most have made simplifying changes, like the elimination of wizard mode.

I don't really mind some changes, like mixed-case text.  Then again, a status bar changes the feel of the game more than I would have expected.  And I wanted to be able to again experience the challenge of proving I'm a wizard in order to play when the cave is closed.

Even the best ports have introduced subtle differences and sometimes even bugs.  So any visible change is&mdash;to me&mdash; a red flag that something could be wrong.

My particular pet peeves are omissions or bugs that break some of the methods of navigating the world.  There were various ways to navigate in portions, both above ground and below.  But all anyone remembers is that you had to use compass directions.  Part of the problem is that the other forms of travel were often broken in the ports.  Subsequent "text adventure games" and "interactive fiction", regardless of genre, solidified the compass as the one true way to navigate and that has always disappointed me.  It's difficult to demonstrate the alternatives in the game that started the category because it's one of the most common ways the ports behave differently than the original.

Why aren't there ports based on the original, canonical source?

Those who have wanted to port the game have been warned away from using the early versions of the source because it makes "extensive" use of peculiar features of DEC Fortran IV on the PDP-10.  And so many ports are based on prior ports that may have already introduced changes and/or bugs.

I will not be turned away.

I want to play the game as it was when I first played it.

Rather than attempt yet another port (and thus inject my own bugs), I set out to write <strike>an interpreter</strike> _a translator_ for the minimal subset of Fortran IV necessary to run the Adventure from the original unaltered source code and data file. (See Note 2.)

And that means I have to deal with hazards of the aforementioned peculiar features.

So let's [dive in](docs/peculiar.md).

---

**Notes**

1. As I've worked on this project, I've learned that some of ports have been updated, fixing at least some of the telltale bugs I'm used to spotting in the ports.  So it's possible that there may be one out there that is a faithful port.  At this point, I don't care.  I'm having fun.

2. A couple weeks into this project, I came across a [project](https://github.com/swenson/adventwure/tree/main) that uses a PDP-10 Fortran IV interpreter written in Python.  Its existence was part of the impetus to switch my projects from interpreter to translator.


